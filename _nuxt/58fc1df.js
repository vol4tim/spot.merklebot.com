(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1893:function(e,t,o){"use strict";o.r(t);o(76),o(44),o(21),o(43);var n=o(1184);const c=window.THREE||o(1184),r=function(object,e){void 0===e&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const t=this,o=-1,n=0,r=1,d=2,l=3,m=4;this.object=object,this.domElement=e,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:c.MOUSE.ROTATE,MIDDLE:c.MOUSE.ZOOM,RIGHT:c.MOUSE.PAN},this.target=new c.Vector3;const h=new c.Vector3;let v=o,y=o,w=new c.Vector3,f=new c.Vector2,E=new c.Vector2,L=new c.Vector3,D=0,j=new c.Vector2,k=new c.Vector2,V=0,x=0,S=new c.Vector2,z=new c.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var M={type:"change"},P={type:"start"},Y={type:"end"};this.handleResize=function(){const e=t.domElement.getBoundingClientRect(),o=t.domElement.ownerDocument.documentElement;t.screen.left=e.left+window.pageXOffset-o.clientLeft,t.screen.top=e.top+window.pageYOffset-o.clientTop,t.screen.width=e.width,t.screen.height=e.height};const O=function(){const e=new c.Vector2;return function(o,n){return e.set((o-t.screen.left)/t.screen.width,(n-t.screen.top)/t.screen.height),e}}(),T=function(){const e=new c.Vector2;return function(o,n){return e.set((o-.5*t.screen.width-t.screen.left)/(.5*t.screen.width),(t.screen.height+2*(t.screen.top-n))/t.screen.width),e}}();function X(e){if(!1!==t.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(e.preventDefault(),e.stopPropagation(),v===o)switch(e.button){case t.mouseButtons.LEFT:v=n;break;case t.mouseButtons.MIDDLE:v=r;break;case t.mouseButtons.RIGHT:v=d;break;default:v=o}const c=y!==o?y:v;c!==n||t.noRotate?c!==r||t.noZoom?c!==d||t.noPan||(S.copy(O(e.pageX,e.pageY)),z.copy(S)):(j.copy(O(e.pageX,e.pageY)),k.copy(j)):(E.copy(T(e.pageX,e.pageY)),f.copy(E));t.domElement.ownerDocument.addEventListener("pointermove",C,!1),t.domElement.ownerDocument.addEventListener("pointerup",R,!1),t.dispatchEvent(P)}(e)}}function C(e){if(!1!==t.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===t.enabled)return;e.preventDefault(),e.stopPropagation();const c=y!==o?y:v;c!==n||t.noRotate?c!==r||t.noZoom?c!==d||t.noPan||z.copy(O(e.pageX,e.pageY)):k.copy(O(e.pageX,e.pageY)):(f.copy(E),E.copy(T(e.pageX,e.pageY)))}(e)}}function R(e){if(!1!==t.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===t.enabled)return;e.preventDefault(),e.stopPropagation(),v=o,t.domElement.ownerDocument.removeEventListener("pointermove",C),t.domElement.ownerDocument.removeEventListener("pointerup",R),t.dispatchEvent(Y)}(e)}}function B(e){!1!==t.enabled&&(window.removeEventListener("keydown",B),y===o&&(e.keyCode!==t.keys[n]||t.noRotate?e.keyCode!==t.keys[r]||t.noZoom?e.keyCode!==t.keys[d]||t.noPan||(y=d):y=r:y=n))}function F(){!1!==t.enabled&&(y=o,window.addEventListener("keydown",B,!1))}function A(e){if(!1!==t.enabled&&!0!==t.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:j.y-=.025*e.deltaY;break;case 1:j.y-=.01*e.deltaY;break;default:j.y-=25e-5*e.deltaY}t.dispatchEvent(P),t.dispatchEvent(Y)}}function U(e){if(!1!==t.enabled){if(e.preventDefault(),1===e.touches.length)v=l,E.copy(T(e.touches[0].pageX,e.touches[0].pageY)),f.copy(E);else{v=m;var o=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;x=V=Math.sqrt(o*o+n*n);var c=(e.touches[0].pageX+e.touches[1].pageX)/2,r=(e.touches[0].pageY+e.touches[1].pageY)/2;S.copy(O(c,r)),z.copy(S)}t.dispatchEvent(P)}}function Z(e){if(!1!==t.enabled)if(e.preventDefault(),e.stopPropagation(),1===e.touches.length)f.copy(E),E.copy(T(e.touches[0].pageX,e.touches[0].pageY));else{var o=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;x=Math.sqrt(o*o+n*n);var c=(e.touches[0].pageX+e.touches[1].pageX)/2,r=(e.touches[0].pageY+e.touches[1].pageY)/2;z.copy(O(c,r))}}function I(e){if(!1!==t.enabled){switch(e.touches.length){case 0:v=o;break;case 1:v=l,E.copy(T(e.touches[0].pageX,e.touches[0].pageY)),f.copy(E)}t.dispatchEvent(Y)}}function _(e){!1!==t.enabled&&e.preventDefault()}this.rotateCamera=function(){let e,o=new c.Vector3,n=new c.Quaternion,r=new c.Vector3,d=new c.Vector3,l=new c.Vector3,m=new c.Vector3;return function(){m.set(E.x-f.x,E.y-f.y,0),e=m.length(),e?(w.copy(t.object.position).sub(t.target),r.copy(w).normalize(),d.copy(t.object.up).normalize(),l.crossVectors(d,r).normalize(),d.setLength(E.y-f.y),l.setLength(E.x-f.x),m.copy(d.add(l)),o.crossVectors(m,w).normalize(),e*=t.rotateSpeed,n.setFromAxisAngle(o,e),w.applyQuaternion(n),t.object.up.applyQuaternion(n),L.copy(o),D=e):!t.staticMoving&&D&&(D*=Math.sqrt(1-t.dynamicDampingFactor),w.copy(t.object.position).sub(t.target),n.setFromAxisAngle(L,D),w.applyQuaternion(n),t.object.up.applyQuaternion(n)),f.copy(E)}}(),this.zoomCamera=function(){let e;v===m?(e=V/x,V=x,w.multiplyScalar(e)):(e=1+(k.y-j.y)*t.zoomSpeed,1!==e&&e>0&&w.multiplyScalar(e),t.staticMoving?j.copy(k):j.y+=(k.y-j.y)*this.dynamicDampingFactor)},this.panCamera=function(){let e=new c.Vector2,o=new c.Vector3,n=new c.Vector3;return function(){e.copy(z).sub(S),e.lengthSq()&&(e.multiplyScalar(w.length()*t.panSpeed),n.copy(w).cross(t.object.up).setLength(e.x),n.add(o.copy(t.object.up).setLength(e.y)),t.object.position.add(n),t.target.add(n),t.staticMoving?S.copy(z):S.add(e.subVectors(z,S).multiplyScalar(t.dynamicDampingFactor)))}}(),this.checkDistances=function(){t.noZoom&&t.noPan||(w.lengthSq()>t.maxDistance*t.maxDistance&&(t.object.position.addVectors(t.target,w.setLength(t.maxDistance)),j.copy(k)),w.lengthSq()<t.minDistance*t.minDistance&&(t.object.position.addVectors(t.target,w.setLength(t.minDistance)),j.copy(k)))},this.update=function(){w.subVectors(t.object.position,t.target),t.noRotate||t.rotateCamera(),t.noZoom||t.zoomCamera(),t.noPan||t.panCamera(),t.object.position.addVectors(t.target,w),t.checkDistances(),t.object.lookAt(t.target),h.distanceToSquared(t.object.position)>1e-6&&(t.dispatchEvent(M),h.copy(t.object.position))},this.reset=function(){v=o,y=o,t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.up.copy(t.up0),w.subVectors(t.object.position,t.target),t.object.lookAt(t.target),t.dispatchEvent(M),h.copy(t.object.position)},this.dispose=function(){t.domElement.removeEventListener("contextmenu",_,!1),t.domElement.removeEventListener("pointerdown",X,!1),t.domElement.removeEventListener("wheel",A,!1),t.domElement.removeEventListener("touchstart",U,!1),t.domElement.removeEventListener("touchend",I,!1),t.domElement.removeEventListener("touchmove",Z,!1),t.domElement.ownerDocument.removeEventListener("pointermove",C,!1),t.domElement.ownerDocument.removeEventListener("pointerup",R,!1),window.removeEventListener("keydown",B,!1),window.removeEventListener("keyup",F,!1)},this.domElement.addEventListener("contextmenu",_,!1),this.domElement.addEventListener("pointerdown",X,!1),this.domElement.addEventListener("wheel",A,!1),this.domElement.addEventListener("touchstart",U,!1),this.domElement.addEventListener("touchend",I,!1),this.domElement.addEventListener("touchmove",Z,!1),this.domElement.ownerDocument.addEventListener("pointermove",C,!1),this.domElement.ownerDocument.addEventListener("pointerup",R,!1),window.addEventListener("keydown",B,!1),window.addEventListener("keyup",F,!1),this.handleResize(),this.update()};(r.prototype=Object.create(c.EventDispatcher.prototype)).constructor=r;var d=r,l=o(1903),m=o(1748),h=o(94),v=Object(h.b)({props:["rosUrl","urdfUrl"],setup:function(e){console.log(e);var t=e.rosUrl,o=e.urdfUrl,c=Object(h.f)("wait"),r=Object(h.f)(null),v=Object(h.f)(null),y=Object(h.f)(null),w=Object(h.f)(null),f=new l.a,E=new WebSocket(t),L=new n.Scene,D=new n.PlaneGeometry(8,8),j=new n.MeshBasicMaterial({color:"#BBBBBB",side:n.DoubleSide}),k=new n.Mesh(D,j),V=new n.PerspectiveCamera(75,4/3,.1,1e3),x=new n.WebGLRenderer({antialias:!0}),S=new n.DirectionalLight("hsl(0, 100%, 100%)"),z=new n.AxesHelper(5),M=null;V.position.z=0,V.position.y=.8,V.position.x=1,k.rotation.x=Math.PI/2,k.position.y=0,L.add(V),L.add(S),L.add(z),L.add(k),f.load(o,(function(e){var t=new m.a;t.workingPath=n.LoaderUtils.extractUrlBase(o),(M=t.parse(e)).rotation.x=-Math.PI/2,L.add(M),c.value="urdf loaded"})),x.setSize(400,300),S.position.set(5,5,0),L.background=new n.Color("hsl(0, 100%, 100%)");var P=new d(V,x.domElement);P.rotateSpeed=1,P.zoomSpeed=5,P.panSpeed=.8,P.noZoom=!1,P.noPan=!1,P.staticMoving=!0,P.dynamicDampingFactor=.3;var animate=function animate(){if(setTimeout((function(){requestAnimationFrame(animate)}),1e3/30),x.render(L,V),y.value){var e=y.value;v.value||(v.value={y:e.translation.z,x:e.translation.x,z:-e.translation.y}),M.position.y=e.translation.z-v.value.y+.1,M.position.x=e.translation.x-v.value.x,M.position.z=-e.translation.y-v.value.z;var t=new n.Euler;if(t.setFromQuaternion(new n.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)),M.rotation.x=t.y-Math.PI/2,M.rotation.y=t.x,M.rotation.z=t.z+Math.PI/2,null!==w.value)for(var o=w.value,c=0;c<o.position.length;c++)M.joints[o.name[c]].setJointValue(o.position[c])}P.update()};return Object(h.d)((function(){r.value.appendChild(x.domElement),animate(),E.onopen=function(e){console.log("Connection established")},E.onmessage=function(e){var data=JSON.parse(e.data);console.log(data);var t=data.robot;w.value=t.topics["/joint_states"];var o=t.topics["/tf"];4===o.transforms.length&&o.transforms.forEach((function(e){"body"===e.child_frame_id&&(y.value=e.transform)}))}})),{scene:L,camera:V,renderer:x,light:S,axes:z,stage:r,status:c}}}),y=o(25),component=Object(y.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",[e._v("status: "+e._s(e.status))]),e._v(" "),o("div",{ref:"stage",staticClass:"stage"})])}),[],!1,null,null,null);t.default=component.exports}}]);