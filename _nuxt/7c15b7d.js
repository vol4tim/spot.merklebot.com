(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1042:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return w})),n.d(e,"g",(function(){return _})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return k})),n.d(e,"c",(function(){return R})),n.d(e,"a",(function(){return j}));var r,c=n(14),o=(n(59),n(78),n(49),n(64),n(1117)),l=n(1082),f=n.n(l),d=n(1118),x=n(900),h=n(860),v=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return",r);case 2:return(r=new o.a({endpoint:"wss://kusama.rpc.robonomics.network"})).setAccountManager(new f.a(d.a)),t.next=6,r.run();case 6:return t.next=8,f.a.initPlugin(r.accountManager.keyring);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return r=t.sent,c=r.launch.send(e,o.b.cidToHex(n)),t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return r=t.sent,c=r.api.tx.balances.transfer(e,n),t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),_=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,c,o,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return r=t.sent,t.next=5,Object(x.i)(r.accountManager.account.meta.source);case 5:if(c=t.sent,!(o=null==c||null===(n=c.signer)||void 0===n?void 0:n.signRaw)){t.next=13;break}return t.next=10,o({address:r.accountManager.account.address,data:Object(h.a)(e),type:"bytes"});case 10:return l=t.sent,f=l.signature,t.abrupt("return",f);case 13:return t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return n=t.sent,t.next=5,n.accountManager.signAndSend(e);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return n=t.sent,t.next=5,n.api.tx.utility.batch(e);case 5:return r=t.sent,t.next=8,n.accountManager.signAndSend(r);case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(t,e){return"https://".concat(t,".subscan.io/extrinsic/").concat(e)},j=function(address){return address?address.slice(0,6)+"..."+address.slice(-4):""}},1064:function(t,e){},1080:function(t,e){},1087:function(t,e){},1796:function(t,e,n){"use strict";n.r(e);var r=n(14),c=(n(49),n(21),n(76),n(64),n(1042)),o={name:"ControlPanel",data:function(){return{queueSize:null,robotState:null,lastSessionId:null,cps:{address:"4FNQo2tK6PLeEhNEUuPePs8B8xKNwx15fX7tC2XnYpkC8W1j",status:"unknown",launch:{txInfo:null,txStatus:null}}}},mounted:function(){this.doRobotStatePolling()},methods:{launchCps:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.cps.launch.txInfo={tx:null},e.cps.launch.txStatus=null,n.next=4,Object(c.b)(e.cps.address,!0);case 4:if(r=n.sent,e.cps.status="wait_tx",!t){n.next=15;break}return n.next=9,Object(c.d)(e.cps.address,t);case 9:return o=n.sent,n.next=12,Object(c.f)([r,o]);case 12:e.cps.launch.txInfo=n.sent,n.next=18;break;case 15:return n.next=17,Object(c.e)(r);case 17:e.cps.launch.txInfo=n.sent;case 18:return e.cps.launch.txStatus="accepted",e.cps.status="activated",n.abrupt("return",!0);case 21:case"end":return n.stop()}}),n)})))()},addressShort:function(address){return address.slice(0,6)+"..."+address.slice(-4)},updateRobotState:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.merklebot.com/strelka/current_state",{method:"GET"});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,t.robotState=r.robot_state,t.queueSize=r.queue_size,t.lastSessionId=r.last_session_id,e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))()},doRobotStatePolling:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.updateRobotState();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Spot state unavailable, retrying");case 8:setTimeout(t.doRobotStatePolling,1e3);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))()}}},l=n(25),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[n("p",[t._v("Queued: "+t._s(t.queueSize))]),t._v(" "),n("p",[t._v("Robot state: "+t._s(t.robotState))]),t._v(" "),t.lastSessionId&&"idle"===t.robotState?n("p",{staticClass:"text-purple-500"},[n("NuxtLink",{attrs:{to:"/records/"+t.lastSessionId}},[t._v("Last session: "+t._s(t.lastSessionId))])],1):t._e(),t._v(" "),n("ul",{staticStyle:{"list-style":"none",padding:"0"}},[n("li",[t._v("Robot status: "+t._s(t.cps.status))]),t._v(" "),t.cps.launch.txStatus?n("li",[t._v("\n        Transaction status: "+t._s(t.cps.launch.txStatus)+"\n      ")]):t._e(),t._v(" "),t.cps.launch.txInfo?n("li",[t._v("\n        View transaction:\n        "),n("a",{attrs:{href:"https://robonomics.subscan.io/extrinsic/"+t.cps.launch.txInfo.tx,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.cps.launch.txInfo.tx)))])]):t._e()])])])}),[],!1,null,"4f659bbc",null);e.default=component.exports},569:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}}]);